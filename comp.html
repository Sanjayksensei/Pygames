<!DOCTYPE html>
<html>
<head>
    <title>Game System (PC)</title>
    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
    <style>
        body { font-family: 'Courier New', Courier, monospace; text-align: center; background: #1a1a2e; color: #e94560; margin: 0; overflow: hidden; }
        #display { margin-top: 100px; }
        .code-box { font-size: 50px; background: #16213e; padding: 20px; border: 2px dashed #e94560; display: inline-block; margin: 20px; }
        canvas { background: #16213e; display: none; margin: 20px auto; border: 5px solid #0f3460; border-radius: 10px; }
        h1 { text-transform: uppercase; letter-spacing: 5px; }
    </style>
</head>
<body>

    <div id="setup">
        <h1>System Standby</h1>
        <p>Enter this code on your phone interface:</p>
        <div class="code-box" id="room-code">...</div>
    </div>

    <div id="game-stage" style="display:none;">
        <h1>Dino Simulation</h1>
        <canvas id="gameCanvas" width="600" height="200"></canvas>
        <p id="status">CONTROLLER LINKED</p>
    </div>

    <script>
        // Generate a random 4-char ID
        const roomId = Math.random().toString(36).substring(2, 6).toUpperCase();
        document.getElementById('room-code').innerText = roomId;

        const peer = new Peer('GAME-' + roomId); 
        let conn;

        peer.on('connection', (c) => {
            conn = c;
            document.getElementById('setup').style.display = 'none';
            document.getElementById('game-stage').style.display = 'block';
            document.getElementById('gameCanvas').style.display = 'block';
            
            conn.on('data', (data) => { if (data === 'JUMP') jump(); });
        });

        // Simple Game Logic
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");
        let dino = { x: 50, y: 150, w: 30, h: 30, dy: 0, grounded: true };
        let obstacle = { x: 600, y: 160, w: 20, h: 20, speed: 6 };

        function jump() { if (dino.grounded) { dino.dy = -12; dino.grounded = false; } }

        function update() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            dino.dy += 0.8; dino.y += dino.dy;
            if (dino.y > 150) { dino.y = 150; dino.grounded = true; }
            obstacle.x -= obstacle.speed;
            if (obstacle.x < -20) obstacle.x = 600;
            if (dino.x < obstacle.x + obstacle.w && dino.x + dino.w > obstacle.x && dino.y < obstacle.y + obstacle.h && dino.y + dino.h > obstacle.y) {
                obstacle.x = 600; // Reset on hit
            }
            ctx.fillStyle = "#e94560"; ctx.fillRect(dino.x, dino.y, dino.w, dino.h);
            ctx.fillStyle = "#0f3460"; ctx.fillRect(obstacle.x, obstacle.y, obstacle.w, obstacle.h);
            requestAnimationFrame(update);
        }
        update();
    </script>
</body>
</html>